/*
** 計算1995年美國聯邦政府對
** 每位公民徵收的個人收入所得稅。
*/

#include <float.h>

static  double  income_limits[]
        = { 0, 23350, 56550, 117950, 256500, DBL_MAX };
static  float   base_tax[]
        = { 0, 3502.5, 12798.5, 31832.5, 81710.5 };
static  float   percentage[]
        = { .15, .28, .31, .36, .396 };

double
single_tax( double income )
{
        int  category;

        /*
        ** 找到正確的收入類別。DBL_MAX被添加到這個
        ** 列表的末尾，保證迴圈不會進行得太久。
        */
        for( category = 1;
            income >= income_limits[ category ];
            category += 1 )
                ;
        category -= 1;

        /*
        ** 計算稅。
        */
        return base_tax[ category ] + percentage[ category ] *
            ( income - income_limits[ category ] );
}
